{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["turbopack://[project]/src/middleware.js"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\n\r\nexport async function middleware(request) {\r\n  try {\r\n    const authCheckResponse = await fetch(\r\n      \"http://localhost:8001/api/checkAuth\",\r\n      {\r\n        method: \"GET\",\r\n        credentials: \"include\",\r\n        headers: {\r\n          Cookie: request.headers.get(\"cookie\") || \"\",\r\n        },\r\n      }\r\n    );\r\n\r\n    if (!authCheckResponse.ok) {\r\n      throw new Error(\"Failed to fetch authentication data\");\r\n    }\r\n\r\n    const authData = await authCheckResponse.json();\r\n\r\n    // Restrict uploadteams to admin (login)\r\n    if (request.nextUrl.pathname.startsWith(\"/uploadteams\")) {\r\n      if (!authData.isAuthenticated || authData.role !== \"admin\") {\r\n        return NextResponse.redirect(new URL(\"/login\", request.url));\r\n      }\r\n    }\r\n\r\n    if (request.nextUrl.pathname.startsWith(\"/uploadproducts\")) {\r\n      if (!authData.isAuthenticated || authData.role !== \"admin\") {\r\n        return NextResponse.redirect(new URL(\"/login\", request.url));\r\n      }\r\n    }\r\n\r\n    if (request.nextUrl.pathname.startsWith(\"/uploadreviews\")) {\r\n      if (!authData.isAuthenticated || authData.role !== \"admin\") {\r\n        return NextResponse.redirect(new URL(\"/login\", request.url));\r\n      }\r\n    }\r\n\r\n    // Restrict uploadreviews to normal users (user_login)\r\n    // if (request.nextUrl.pathname.startsWith(\"/uploadreviews\")) {\r\n    //   if (!authData.isAuthenticated || authData.role !== \"user\") {\r\n    //     return NextResponse.redirect(new URL(\"/user_login\", request.url));\r\n    //   }\r\n    // }\r\n\r\n    return NextResponse.next();\r\n  } catch (error) {\r\n    console.error(\"Error during fetch:\", error);\r\n    return NextResponse.redirect(new URL(\"/login\", request.url));\r\n  }\r\n}\r\n\r\nexport const config = {\r\n  matcher: [\r\n    \"/uploadteams/:path*\",\r\n    \"/uploadreviews/:path*\",\r\n    \"/uploadproducts/:path*\",\r\n  ],\r\n};\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;;AAEO,eAAe,WAAW,OAAO;IACtC,IAAI;QACF,MAAM,oBAAoB,MAAM,MAC9B,uCACA;YACE,QAAQ;YACR,aAAa;YACb,SAAS;gBACP,QAAQ,QAAQ,OAAO,CAAC,GAAG,CAAC,aAAa;YAC3C;QACF;QAGF,IAAI,CAAC,kBAAkB,EAAE,EAAE;YACzB,MAAM,IAAI,MAAM;QAClB;QAEA,MAAM,WAAW,MAAM,kBAAkB,IAAI;QAE7C,wCAAwC;QACxC,IAAI,QAAQ,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,iBAAiB;YACvD,IAAI,CAAC,SAAS,eAAe,IAAI,SAAS,IAAI,KAAK,SAAS;gBAC1D,OAAO,qLAAA,CAAA,eAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,UAAU,QAAQ,GAAG;YAC5D;QACF;QAEA,IAAI,QAAQ,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,oBAAoB;YAC1D,IAAI,CAAC,SAAS,eAAe,IAAI,SAAS,IAAI,KAAK,SAAS;gBAC1D,OAAO,qLAAA,CAAA,eAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,UAAU,QAAQ,GAAG;YAC5D;QACF;QAEA,IAAI,QAAQ,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,mBAAmB;YACzD,IAAI,CAAC,SAAS,eAAe,IAAI,SAAS,IAAI,KAAK,SAAS;gBAC1D,OAAO,qLAAA,CAAA,eAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,UAAU,QAAQ,GAAG;YAC5D;QACF;QAEA,sDAAsD;QACtD,+DAA+D;QAC/D,iEAAiE;QACjE,yEAAyE;QACzE,MAAM;QACN,IAAI;QAEJ,OAAO,qLAAA,CAAA,eAAY,CAAC,IAAI;IAC1B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,uBAAuB;QACrC,OAAO,qLAAA,CAAA,eAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,UAAU,QAAQ,GAAG;IAC5D;AACF;AAEO,MAAM,SAAS;IACpB,SAAS;QACP;QACA;QACA;KACD;AACH"}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}